(function(){define(["./compose"],function(a){"use strict";var b;return b={around:function(a,b){return function(){var c,d,e,f,g,h;for(f=arguments.length,c=new Array(f+1),c[0]=a.bind(this),e=g=0,h=c.length;h>g;e=++g)d=c[e],c[e+1]=arguments[e];return b.apply(this,c)}},before:function(a,b){var c;return c="function"==typeof b?b:b.obj[b.fnName],function(){return c.apply(this,arguments),a.apply(this,arguments)}},after:function(a,b){var c;return c="function"==typeof b?b:b.obj[b.fnName],function(){var b;return b=(a.unbound||a).apply(this,arguments),c.apply(this,arguments),b}},withAdvice:function(){return["before","after","around"].forEach(function(c){return this[c]=function(d,e){return a.unlockProperty(this,d,function(){return this[d]="function"==typeof this[d]?b[c](this[d],e):e,this[d]})}},this)}}})}).call(this),function(){var a={}.hasOwnProperty;define(["./utils","./debug"],function(b,c){"use strict";var d,e,f,g,h,i;if(d=c.enabled&&!b.isEnumerable(Object,"getOwnPropertyDescriptor"),e=["mixedIn","mixingIn"],d)try{Object.getOwnPropertyDescriptor(Object,"keys")}catch(j){f=j,d=!1}return h=function(b,c){var f,g,h;if(d){h=Object.create(null);for(g in b)a.call(b,g)&&e.indexOf(0>g)&&(f=Object.getOwnPropertyDescriptor(b,g),f.writable=c,h[g]=f);return Object.defineProperties(b,h)}},i=function(a,b,c){var e;return d&&a.hasOwnProperty(b)?(e=Object.getOwnPropertyDescriptor(a,b).writable,Object.defineProperties(a,b,{writable:!0}),c.call(a),Object.defineProperties(a,b,{writable:e})):c.call(a)},g=function(a,b){var c,d;if(!(b instanceof Array))return this.mixin(a,[b]);for(a.mixedIn=a.hasOwnProperty("mixedIn")?a.mixedIn:[],a.mixingIn=a.hasOwnProperty("mixingIn")?a.mixingIn:[],h(a,!1),c=0,d=b.length;d>c;c++)if(g=b[c],-1===a.mixedIn.indexOf(g)){if(a.mixingIn.indexOf(g)>-1)throw new Error("found cyclic dependencies between "+a.mixingIn);a.mixingIn.push(g),g.call(a),a.mixingIn.pop(),a.mixedIn.push(g)}return h(a,!0)},{mixin:g,unlockProperty:i}})}.call(this),function(){var a={}.hasOwnProperty;define([],function(){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return m=window||{},u=function(b,c,d){var e,f,g,h;d=d||{},e=d.obj||m,f=d.path||(e===m?"global":""),h=[];for(g in e)a.call(e,g)&&((t[b]||b)(c,e,g)&&console.log(""+f+"."+g+" -> ("+typeof e[g]+")",e[g]),h.push(e[g]&&"object"==typeof e[g]&&e[g]!==e?u(b,c,{obj:e[g],path:""+f+"."+g}):void 0));return h},r=function(a,b,c,d){return b&&typeof c!==b?console.error(""+c+" must be "+b):u(a,c,d)},t={name:function(a,b,c){return a===c},nameContains:function(a,b,c){return c.indexOf(a)>-1},type:function(a,b,c){return b[c]instanceof a},value:function(a,b,c){return b[c]===a},valueCoerced:function(a,b,c){return b[c]==a}},c=function(a,b){return r("name","string",a,b)},d=function(a,b){return r("nameContains","string",a,b)},e=function(a,b){return r("type","function",a,b)},f=function(a,b){return r("value",null,a,b)},g=function(a,b){return r("valueCoerced",null,a,b)},h=function(a,b){return u(a,null,b)},k=function(){var a;return a=[].slice.call(arguments),o.eventNames.length||(o.eventNames=b),o.actions=a.length?a:b,q()},l=function(){var a;return a=[].slice.call(arguments),o.actions.length||(o.actions=b),o.eventNames=a.length?a:b,q()},n=function(){return o.actions=[],o.eventNames=[],q()},s=function(){return o.actions=b,o.eventNames=b,q()},q=function(){return m.localStorage?(m.localStorage.setItem("logFilter_eventNames",o.eventNames),m.localStorage.setItem("logFilter_actions",o.actions)):void 0},p=function(){var c,d,e;d={eventNames:m.localStorage&&m.localStorage.getItem("logFilter_eventNames")||j,actions:m.localStorage&&m.localStorage.getItem("logFilter_actions")||i};for(c in d)a.call(d,c)&&(e=d[c],"string"==typeof e&&e!==b&&(d[c]=e.split(".")));return d},b="all",j=[],i=[],o=p(),{enable:function(a){return this.enabled=!!a,a&&m.console&&(console.info("Booting in DEBUG mode"),console.info("You can configure event logging with DEBUG.events.logAll()/logNone()/logByName()/logByAction()")),m.DEBUG=this},find:{byName:c,byNameContains:d,byType:e,byValue:f,byValueCoerced:g,custom:h},events:{logFilter:o,logByAction:k,logByName:l,logAll:s,logNone:n}}})}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};define(["./compose"],function(a){"use strict";var c;return c=function(c){var d;return d=c["extends"]?function(a){function c(){return c.__super__.constructor.apply(this,arguments)}return b(c,a),c}(c["extends"]):function(){function a(){}return a}(),c.mixins&&a.mixin(d.prototype,c.mixins),c.name&&(d.name=c.name),d},{define:c}})}.call(this),function(){define(["./utils"],function(a){"use strict";var b,c,d,e,f,g,h,i;h=[].slice,b={withEvent:function(){var a,c,d,e,f;for(e=["on","off","once","trigger"],f=[],c=0,d=e.length;d>c;c++)a=e[c],f.push(this[a]=b[a]);return f},on:function(a,b,c){var e;return d(this,"on",a,[b,c])&&b?(this._events||(this._events={}),e=this._events[a]||(this._events[a]=[]),e.push({callback:b,context:c,ctx:c||this}),this):this},once:function(b,c,e){var f,g;return d(this,"once",b,[c,e])&&c?(g=this,f=a.once(function(){return g.off(b,f),c.apply(this,arguments)}),f._callback=c,this.on(b,f,e)):this},off:function(a,b,c){var e,f,g,h,i,j,k,l,m,n;if(!this._events||!d(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events=void 0,this;for(i=a?[a]:Object.keys(this._events),g=k=0,m=i.length;m>k;g=++k)if(a=i[g],f=this._events[a]){if(this._events[a]=j=[],b||c)for(h=l=0,n=f.length;n>l;h=++l)e=f[h],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&j.push(e);j.length||delete this._events[a]}return this},trigger:function(a){var b,c,e;return this._events?(c=h.call(arguments,1),d(this,"trigger",a,c)?(e=this._events[a],b=this._events.all,e&&i(e,c),b&&i(b,arguments),this):this):this},stopListening:function(a,b,c){var d,e,f;if(e=this._listeningTo,!e)return this;f=!b&&!c,c||"object"!=typeof b||(c=this),a&&((e={})[a._listenId]=a);for(d in e)a=e[d],a.off(b,c,this),(f||_.isEmpty(a._events))&&delete this._listeningTo[d];return this}},c=/\s+/,d=function(a,b,d,e){var f,g,h,i,j;if(!d)return!0;if("object"==typeof d){for(f in d)h=d[f],a[b].apply(a,[f,h].concat(e));return!1}if(c.test(d)){for(g=d.split(c),i=0,j=g.length;j>i;i++)h=g[i],a[b].apply(a,[h].concat(e));return!1}return!0},i=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(c.callback.apply(c.ctx,b));return f},f={listenTo:"on",listenToOnce:"once"};for(g in f)e=f[g],b[g]=function(b,c,d){var f,g;return g=this._listeningTo||(this._listeningTo={}),f=b._listenId||(b._listenId=a.uniqueId("l")),g[f]=b,d||"object"!=typeof c||(d=this),b[e](c,d,this),this};return b})}.call(this),function(){var a={}.hasOwnProperty;define(["./compose","./property"],function(b,c){"use strict";return function(){return b.mixin(this,c),this.initialize=function(b){var c,d,e,f;b||(b={}),c={};for(d in b)a.call(b,d)&&(e=b[d],c[d]=e);f=this.defaults;for(d in f)a.call(f,d)&&(e=f[d],c.hasOwnProperty(d)||(c[d]=e));return this.set(c),this},this.despose=function(){}}})}.call(this),function(){var a={}.hasOwnProperty;define(["./utils","./compose","./event"],function(b,c,d){"use strict";return function(){return c.mixin(this,d.withEvent),this.set=function(c,d){var e,f,g,h,i;if(!c)return this;if(arguments.length>1&&"string"==typeof arguments[0])return f={},f[c]=d,this.set(f);this.attrs||(this.attrs={}),f=c,e={},g={},h=this.attrs;for(c in h)a.call(h,c)&&(d=h[c],g[c]=d);b.push(this.attrs,f),i=this.attrs;for(c in i)a.call(i,c)&&(d=i[c],d!==g[c]?e[c]=d:delete g[c]);return 0!==Object.keys(e).length&&this.trigger("change",{before:g,after:e},!0),this},this.get=function(a){return this.attrs&&this.attrs[a]}}})}.call(this),function(){define(["./compose","./property"],function(a,b){"use strict";return function(){return a.mixin(this,b),this.serialize=function(){return["type: "+this.name,"id: "+this.id,"props: "+JSON.stringify(this.attrs)].join(",")},this.deserialize=function(){}}})}.call(this),function(){var a=[].slice,b={}.hasOwnProperty;define([],function(){"use strict";var c,d;return c=100,d=0,{merge:function(){var c,d,e,f,g,h,i;for(f=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],f&&typeof f!==!1||(f={}),h=0,i=c.length;i>h;h++){e=c[h];for(d in e)b.call(e,d)&&(g=e[d],f[d]="object"!=typeof g?g:this.merge(f[d],g))}return f},push:function(a,c,d){var e,f;if(!a||!c)return a;for(e in c)if(b.call(c,e)){if(f=c[e],a[e]&&d)throw new Error('utils.push attempted to overwrite "'+e+'" while running in protected mode');"object"==typeof a[e]&&"object"==typeof c[e]?this.push(a[e],c[e]):a[e]=c[e]}return a},isEnumerable:function(a,b){return Object.keys(a).indexOf(b)>-1},compose:function(){var a;return a=arguments,function(){var b,c,d,e;for(b=arguments,c=d=e=a.length-1;0>=e?0>=d:d>=0;c=0>=e?++d:--d)b=a[c].apply(this,b);return b[0]}},uniqueArray:function(a){var b,c,d,e,f;for(d={},b=[],e=0,f=a.length;f>e;e++)c=a[e],d.hasOwnProperty(c)||(b.push(c),d[c]=1);return b},debounce:function(a,b,d){var e,f;return"number"!=typeof b&&(b=c),f=0,e=null,function(){var c,g,h,i;return h=this,c=arguments,i=function(){return f=null,d?void 0:e=a.apply(h,c)},g=d&&!f,clearTimeout(f),f=setTimeout(i,b),g&&(e=a.apply(h,c)),e}},throttle:function(a,b){var d,e,f,g,h,i,j;return"number"!=typeof b&&(b=c),e=d=i=h=f=g=null,j=this.debounce(function(){return f=h=!1},b),function(){var c;return e=this,d=arguments,c=function(){return i=null,f&&(g=a.apply(e,d)),j()},i||(i=setTimeout(c,b)),h?f=!0:(h=!0,g=a.apply(e,d)),j(),g}},countThen:function(a,b){return function(){return--a?void 0:b.apply(this,arguments)}},delegate:function(a){return function(c,d){var e,f,g;g=$(c.target),e=null;for(f in a)if(b.call(a,f)&&!c.isPropagationStopped()&&(e=g.closest(f)).length)return d=d||{},d.el=e[0],a[f].apply(this,[c,d])}},once:function(a){var b,c;return b=!1,c=null,function(){return b?c:(c=a.apply(this,arguments),b=!0,c)}},uniqueId:function(a){var b;return b=++d+"",a?a+b:b}}})}.call(this);